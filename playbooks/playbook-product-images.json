{
  "id": "playbook-product-images",
  "scope": "products",
  "title": "Images Produits ‚Äî Upload / Affichage / Format / Galerie",
  "triggers": [
    "image produit",
    "photo produit",
    "image ne s'affiche pas",
    "upload image",
    "t√©l√©charger image",
    "image ne charge pas",
    "plusieurs images",
    "galerie produit",
    "image principale"
  ],
  "description": "R√©solution des probl√®mes li√©s aux images produits: upload √©choue, images ne s'affichent pas, format/taille incorrects, gestion de plusieurs images, image principale.",
  "steps": [
    {
      "kind": "ask",
      "question": "Images produits : (1) Probl√®me (upload √©choue / image ne s'affiche pas / mauvaise qualit√© / plusieurs images) ? (2) Format image (JPG/PNG/WebP) ? (3) Taille fichier approximative ?",
      "step_id": "ASK_01_IMAGES_PRODUITS_1__671A73",
      "field": "file_size"
    },
    {
      "kind": "solve",
      "title": "Formats et tailles accept√©s",
      "response": "Sp√©cifications techniques images TikTak PRO :\n\n‚úì FORMATS ACCEPT√âS\n  ‚Ä¢ JPG / JPEG ‚úì (recommand√©)\n  ‚Ä¢ PNG ‚úì (pour transparence)\n  ‚Ä¢ WebP ‚úì (moderne, l√©ger)\n  ‚Ä¢ GIF ‚úì (limit√©, √©viter animations)\n  \n  ‚ùå FORMATS NON ACCEPT√âS\n  ‚Ä¢ BMP (trop lourd)\n  ‚Ä¢ TIFF (professionnel, trop lourd)\n  ‚Ä¢ SVG (vectoriel, pas support√© produits)\n  ‚Ä¢ PDF (document, pas image)\n\n‚úì TAILLE FICHIER\n  ‚Ä¢ Maximum: 5 MB par image\n  ‚Ä¢ Recommand√©: 500 KB - 2 MB\n  ‚Ä¢ Si > 5 MB ‚Üí Compression requise\n\n‚úì DIMENSIONS RECOMMAND√âES\n  ‚Ä¢ Optimale: 1000 x 1000 px (carr√©)\n  ‚Ä¢ Minimum: 500 x 500 px\n  ‚Ä¢ Maximum: 4000 x 4000 px\n  ‚Ä¢ Ratio: Carr√© pr√©f√©r√© (1:1)\n  ‚Ä¢ Acceptable: 4:3 ou 16:9\n\n‚úì QUALIT√â\n  ‚Ä¢ JPG: Qualit√© 80-90%\n  ‚Ä¢ PNG: Compression mod√©r√©e\n  ‚Ä¢ R√©solution: 72 DPI (web)\n  ‚Ä¢ Couleurs: RVB (pas CMYK)\n\nVotre image respecte-t-elle ces crit√®res ?",
      "actions": [
        "verify_image_format",
        "check_file_size",
        "verify_dimensions",
        "compress_if_needed"
      ],
      "success_indicator": "Format JPG/PNG, < 5MB, dimensions 1000x1000px environ",
      "note": "Images trop grandes ralentissent le site",
      "step_id": "SOLVE_02_FORMATS_ET_TAILLES_2164CD"
    },
    {
      "kind": "solve",
      "title": "Erreur Upload Image",
      "response": "Si upload √©choue ou erreur s'affiche :\n\n‚úì 1. V√âRIFIER TAILLE FICHIER\n  ‚Ä¢ Clic droit image ‚Üí Propri√©t√©s\n  ‚Ä¢ Taille > 5 MB ?\n  ‚Ä¢ ‚Üí Compresser avant upload\n  \n  Compression rapide:\n  ‚Ä¢ Windows: Paint ‚Üí Enregistrer (qualit√© 80%)\n  ‚Ä¢ Mac: Aper√ßu ‚Üí Exporter (qualit√© r√©duite)\n  ‚Ä¢ En ligne: tinypng.com, compressor.io\n  ‚Ä¢ Photoshop: Enregistrer pour le web\n\n‚úì 2. V√âRIFIER FORMAT\n  ‚Ä¢ Extension .jpg, .png, .webp ?\n  ‚Ä¢ Si .bmp, .tiff ‚Üí Convertir en JPG\n  ‚Ä¢ Renommer extension si besoin\n\n‚úì 3. VIDER CACHE NAVIGATEUR\n  ‚Ä¢ Ctrl+Shift+Delete ‚Üí Cache\n  ‚Ä¢ Rafra√Æchir page produit\n  ‚Ä¢ Retenter upload\n\n‚úì 4. TESTER AUTRE IMAGE\n  ‚Ä¢ Image sp√©cifique probl√®me ?\n  ‚Ä¢ Tester avec image simple/petite\n  ‚Ä¢ Si OK: probl√®me image originale\n  ‚Ä¢ Si KO: probl√®me upload g√©n√©ral\n\n‚úì 5. CONNEXION INTERNET\n  ‚Ä¢ Upload lent si connexion faible\n  ‚Ä¢ Attendre fin upload complet\n  ‚Ä¢ Pas de timeout/interruption\n  ‚Ä¢ Tester depuis 4G si WiFi instable\n\n‚úì 6. BROWSER/DEVICE\n  ‚Ä¢ Tester autre navigateur\n  ‚Ä¢ Tester depuis desktop si mobile\n  ‚Ä¢ D√©sactiver VPN si actif\n\nQuel message d'erreur exact s'affiche ?",
      "actions": [
        "compress_image_file",
        "convert_image_format",
        "clear_cache_retry",
        "test_different_image",
        "verify_internet_stable",
        "try_different_browser"
      ],
      "success_indicator": "Image upload√©e et visible dans galerie produit",
      "common_errors": [
        "File too large ‚Üí Compresser < 5MB",
        "Invalid format ‚Üí Convertir en JPG/PNG",
        "Upload timeout ‚Üí V√©rifier connexion, r√©essayer",
        "Forbidden ‚Üí V√©rifier permissions utilisateur"
      ],
      "troubleshooting": {
        "Upload bloque √† 50%": "Connexion instable ou timeout, r√©essayer",
        "Erreur 'File too large'": "Compresser image < 5MB",
        "Erreur 'Invalid file type'": "Format non support√©, convertir en JPG",
        "Aucune erreur mais image pas visible": "Cache, Ctrl+F5 rafra√Æchir"
      },
      "step_id": "SOLVE_03_ERREUR_UPLOAD_IMAG_D9EEDF"
    },
    {
      "kind": "solve",
      "title": "Image Ne S'Affiche Pas (sur site)",
      "response": "Si image upload√©e mais pas visible sur site :\n\n‚úì 1. VIDER CACHE SITE\n  ‚Ä¢ Ctrl+F5 (rafra√Æchir force)\n  ‚Ä¢ Attendre 2-3 minutes (propagation cache)\n  ‚Ä¢ Tester navigation priv√©e\n  ‚Ä¢ Si visible en priv√©: cache probl√®me\n\n‚úì 2. V√âRIFIER IMAGE PRINCIPALE\n  ‚Ä¢ Produits ‚Üí [Produit] ‚Üí Images\n  ‚Ä¢ Image principale d√©finie ?\n  ‚Ä¢ Premi√®re image = image principale\n  ‚Ä¢ R√©ordonner si besoin (drag & drop)\n\n‚úì 3. V√âRIFIER VISIBILIT√â PRODUIT\n  ‚Ä¢ Produit ‚Üí Param√®tres\n  ‚Ä¢ 'Visible sur le site' ‚úì ?\n  ‚Ä¢ 'Actif' ‚úì ?\n  ‚Ä¢ Si d√©coch√©: produit masqu√© (image aussi)\n\n‚úì 4. V√âRIFIER URL IMAGE\n  ‚Ä¢ Clic droit image (back-office) ‚Üí Copier lien\n  ‚Ä¢ Coller dans navigateur\n  ‚Ä¢ Image s'ouvre ?\n  ‚Ä¢ Si 404: image corrompue, re-upload\n  ‚Ä¢ Si OK: probl√®me affichage template\n\n‚úì 5. V√âRIFIER TEMPLATE SITE\n  ‚Ä¢ Templates ‚Üí [Votre template]\n  ‚Ä¢ Section produit configur√©e ?\n  ‚Ä¢ Image produit activ√©e dans template ?\n  ‚Ä¢ Tester autre template pour isoler\n\n‚úì 6. CLOUDFLARE CACHE\n  Admin avanc√©:\n  ‚Ä¢ Outils ‚Üí Vider cache Cloudflare\n  ‚Ä¢ Attendre 5 minutes\n  ‚Ä¢ Retester\n\nL'image est-elle visible en back-office ?",
      "actions": [
        "clear_site_cache_ctrl_f5",
        "set_main_image",
        "verify_product_visibility",
        "verify_image_url",
        "check_template_config",
        "clear_cloudflare_cache"
      ],
      "success_indicator": "Image visible sur page produit site",
      "time_estimate": "Cache: 2-5 minutes, Template: 10-15 minutes",
      "step_id": "SOLVE_04_IMAGE_NE_S_AFFICHE_7C1259"
    },
    {
      "kind": "solve",
      "title": "G√©rer Plusieurs Images (Galerie)",
      "response": "Ajouter et organiser plusieurs images produit :\n\n‚úì 1. UPLOAD MULTIPLE\n  ‚Ä¢ Produits ‚Üí [Produit] ‚Üí Images\n  ‚Ä¢ Cliquer 'Ajouter images'\n  ‚Ä¢ S√©lectionner PLUSIEURS fichiers:\n    - Windows: Ctrl+clic fichiers\n    - Mac: Cmd+clic fichiers\n  ‚Ä¢ Ou drag & drop plusieurs ensemble\n  ‚Ä¢ Upload simultan√© (max 10 recommand√©)\n\n‚úì 2. ORDRE DES IMAGES\n  ‚Ä¢ Premi√®re image = Image principale\n  ‚Ä¢ R√©ordonner:\n    - Drag & drop (si interface le permet)\n    - Ou num√©roter: image-01.jpg, image-02.jpg\n  ‚Ä¢ Image principale appara√Æt:\n    - Liste produits (vignette)\n    - Page produit (grande image)\n    - Panier\n\n‚úì 3. GALERIE PRODUIT\n  ‚Ä¢ Site affiche galerie automatiquement\n  ‚Ä¢ Clients peuvent:\n    - Cliquer pour agrandir\n    - Naviguer entre images (fl√®ches)\n    - Zoom (si template le supporte)\n  ‚Ä¢ Toutes images upload√©es visibles\n\n‚úì 4. IMAGES PAR VARIANTE\n  ‚Ä¢ Si produit a variantes (couleurs):\n    - Chaque variante peut avoir son image\n    - Variantes ‚Üí [Variante] ‚Üí Image sp√©cifique\n    - Site change image selon s√©lection couleur\n  ‚Ä¢ Image variante prioritaire sur image produit\n\n‚úì 5. SUPPRIMER IMAGE\n  ‚Ä¢ Survoler image ‚Üí Ic√¥ne poubelle\n  ‚Ä¢ Confirmer suppression\n  ‚Ä¢ Ne supprime pas de l'espace m√©dias\n  ‚Ä¢ Juste lien produit ‚Üî image\n\nCombien d'images souhaitez-vous ajouter ?",
      "actions": [
        "upload_multiple_images",
        "reorder_images_drag_drop",
        "set_primary_image",
        "assign_variant_images",
        "delete_unwanted_images"
      ],
      "success_indicator": "Galerie compl√®te, ordre correct, image principale d√©finie",
      "best_practices": [
        "3-5 images par produit (optimal)",
        "Angles diff√©rents (face, profil, d√©tails)",
        "Fond blanc ou neutre (professionnel)",
        "M√™me format/taille pour coh√©rence",
        "Image principale = meilleur angle"
      ],
      "step_id": "SOLVE_05_G_RER_PLUSIEURS_IM_A50603"
    },
    {
      "kind": "solve",
      "title": "Qualit√© Image (trop floue / pixelis√©e)",
      "response": "Si image floue ou basse qualit√© sur site :\n\n‚úì 1. R√âSOLUTION ORIGINALE\n  ‚Ä¢ V√©rifier image source:\n    - Dimensions: minimum 800x800px\n    - Recommand√©: 1000x1000px ou plus\n  ‚Ä¢ Si trop petite: impossible am√©liorer\n  ‚Ä¢ Re-photographier en haute r√©solution\n\n‚úì 2. COMPRESSION EXCESSIVE\n  ‚Ä¢ JPG qualit√© < 70%: trop compress√©\n  ‚Ä¢ Re-exporter avec qualit√© 80-90%\n  ‚Ä¢ √âviter sauvegardes multiples (perte qualit√©)\n  ‚Ä¢ PNG si besoin qualit√© max (mais plus lourd)\n\n‚úì 3. ZOOM / RECADRAGE\n  ‚Ä¢ Image agrandie = pixelis√©e\n  ‚Ä¢ Ne pas zoomer sur petite image\n  ‚Ä¢ Utiliser image haute r√©solution\n  ‚Ä¢ Recadrer AVANT upload, pas apr√®s\n\n‚úì 4. FORMAT ADAPT√â\n  ‚Ä¢ Photo: JPG (80-90% qualit√©)\n  ‚Ä¢ Logo/texte: PNG (sans perte)\n  ‚Ä¢ Moderne: WebP (meilleur compression)\n\n‚úì 5. TEMPLATE RESIZE\n  ‚Ä¢ Certains templates redimensionnent mal\n  ‚Ä¢ Tester autre template\n  ‚Ä¢ Ou uploader dimensions exactes template\n  ‚Ä¢ V√©rifier CSS template (image-rendering)\n\nL'image source est-elle haute r√©solution (>1000px) ?",
      "actions": [
        "verify_source_resolution",
        "re_export_higher_quality",
        "use_higher_resolution_source",
        "test_different_template",
        "check_css_image_rendering"
      ],
      "success_indicator": "Image nette et claire sur toutes tailles √©cran",
      "note": "Impossible am√©liorer image basse r√©solution, re-photographier requis",
      "step_id": "SOLVE_06_QUALIT_IMAGE_TROP__F66537"
    },
    {
      "kind": "solve",
      "title": "Outils Compression/Optimisation Recommand√©s",
      "response": "OUTILS GRATUITS POUR OPTIMISER IMAGES :\n\nüåê EN LIGNE (sans installation):\n  ‚Ä¢ TinyPNG: tinypng.com\n    - Compression intelligente PNG/JPG\n    - Jusqu'√† 70% r√©duction taille\n    - Qualit√© pr√©serv√©e\n  \n  ‚Ä¢ Compressor.io: compressor.io\n    - 4 formats support√©s\n    - Comparaison avant/apr√®s\n  \n  ‚Ä¢ Squoosh: squoosh.app (Google)\n    - WebP conversion\n    - Contr√¥le avanc√© qualit√©\n\nüíª LOGICIELS:\n  ‚Ä¢ Photoshop: Fichier ‚Üí Enregistrer pour le web\n  ‚Ä¢ GIMP (gratuit): Export ‚Üí Qualit√© 80-85%\n  ‚Ä¢ Paint (Windows): Enregistrer ‚Üí JPG qualit√©\n  ‚Ä¢ Aper√ßu (Mac): Exporter ‚Üí R√©duire taille\n\nüì± APPLICATIONS MOBILE:\n  ‚Ä¢ Photo Compress (Android)\n  ‚Ä¢ Image Size (iOS)\n  ‚Ä¢ Compress Image (iOS)\n\n‚ö° BATCH (plusieurs images):\n  ‚Ä¢ ILoveIMG: iloveimg.com/compress-image\n  ‚Ä¢ Bulk Resize Photos: bulkresizephotos.com\n\nPROCESSUS RECOMMAND√â:\n1. Photographier haute r√©solution\n2. Recadrer/√©diter\n3. Redimensionner 1000x1000px\n4. Compresser (80% qualit√©)\n5. Upload TikTak\n\nQuel outil pr√©f√©rez-vous utiliser ?",
      "note": "Compression avant upload = site plus rapide + meilleure exp√©rience",
      "step_id": "SOLVE_07_OUTILS_COMPRESSION_6A3E67"
    },
    {
      "kind": "verify",
      "question": "Images upload√©es et visibles ? Si non, pr√©cisez : format image, taille fichier, message erreur, visible en back-office (oui/non), visible sur site (oui/non).",
      "step_id": "VERIFY_08_IMAGES_UPLOAD_ES_E_84FA9B"
    },
    {
      "kind": "escalate",
      "reason": "Images upload√©es avec succ√®s en back-office (format correct, taille OK) mais ne s'affichent pas sur site apr√®s cache vid√© et attente 30 minutes, OU erreurs upload persistantes malgr√© format/taille corrects",
      "required_info": [
        "Format image (JPG/PNG/WebP)",
        "Taille fichier (MB)",
        "Dimensions image (largeur x hauteur px)",
        "Message erreur upload (si applicable)",
        "Image visible en back-office ? (oui/non)",
        "Image visible sur site ? (oui/non)",
        "Produit 'Visible sur site' activ√© ? (oui/non)",
        "Cache vid√© (Ctrl+F5) ? (oui/non)",
        "Test√© navigation priv√©e ? (oui/non)",
        "Navigateur utilis√©",
        "URL produit concern√©"
      ],
      "step_id": "ESCALATE_09_ESCALATE_9DCD5C",
      "when": [
        "needs_human_review"
      ],
      "handoff_template": {
        "summary": "Images upload√©es avec succ√®s en back-office (format correct, taille OK) mais ne s'affichent pas sur site apr√®s cache vid√© et attente 30 minutes, OU erreurs upload persistantes malgr√© format/taille corrects",
        "repro_steps": [],
        "evidence": [
          "Format image (JPG/PNG/WebP)",
          "Taille fichier (MB)",
          "Dimensions image (largeur x hauteur px)",
          "Message erreur upload (si applicable)",
          "Image visible en back-office ? (oui/non)",
          "Image visible sur site ? (oui/non)",
          "Produit 'Visible sur site' activ√© ? (oui/non)",
          "Cache vid√© (Ctrl+F5) ? (oui/non)",
          "Test√© navigation priv√©e ? (oui/non)",
          "Navigateur utilis√©",
          "URL produit concern√©"
        ],
        "suspected_component": "products",
        "priority": "P2"
      }
    }
  ],
  "related_docs": [
    "/products - Cr√©ation et gestion produits",
    "/products/new - Ajout images lors cr√©ation"
  ],
  "best_practices": [
    "Format: JPG pour photos, PNG pour logos/transparence",
    "Taille: < 1 MB par image (site rapide)",
    "Dimensions: 1000x1000px (carr√© optimal)",
    "Qualit√©: 80-90% (bon compromis poids/qualit√©)",
    "Nombre: 3-5 images par produit",
    "Fond: Blanc ou neutre pour produits",
    "Noms: Descriptifs (produit-rouge-face.jpg)",
    "Compression: Avant upload pour performance"
  ],
  "common_errors": [
    {
      "symptom": "Upload √©choue √† 100%",
      "cause": "Fichier > 5MB ou format non support√©",
      "solution": "Compresser < 5MB ou convertir en JPG/PNG"
    },
    {
      "symptom": "Image upload√©e mais pas sur site",
      "cause": "Cache ou produit masqu√©",
      "solution": "Ctrl+F5 rafra√Æchir, v√©rifier 'Visible sur site' actif"
    },
    {
      "symptom": "Image floue sur site",
      "cause": "R√©solution trop basse ou compression excessive",
      "solution": "Uploader image > 1000px avec qualit√© 80%+"
    },
    {
      "symptom": "Plusieurs images ne s'ordonnent pas",
      "cause": "Interface drag & drop ou num√©rotation",
      "solution": "Nommer images avec num√©ros: 01, 02, 03..."
    }
  ],
  "canonical_scope": "products",
  "required_fields": [
    {
      "key": "image_format",
      "question": "Quel format d'image (JPG/PNG/autre) ?"
    },
    {
      "key": "file_size",
      "question": "Taille du fichier approximative (MB) ?"
    },
    {
      "key": "upload_success",
      "question": "Upload r√©ussi en back-office (oui/non) ?"
    }
  ],
  "schema_version": "v2_deterministic_steps"
}