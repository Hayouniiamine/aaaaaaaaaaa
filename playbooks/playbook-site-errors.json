{
  "id": "playbook-site-errors",
  "scope": "general",
  "title": "Erreurs Site â€” 404 / 500 / Page Blanche / Ne Charge Pas",
  "triggers": [
    "erreur",
    "error",
    "404",
    "500",
    "502",
    "503",
    "504",
    "page blanche",
    "blank",
    "white screen",
    "Ã©cran blanc",
    "ne charge pas",
    "not loading",
    "Ã©cran vide",
    "page vide",
    "timeout",
    "loading"
  ],
  "description": "Diagnostic et rÃ©solution des erreurs d'affichage et erreurs serveur: pages blanches, erreurs HTTP (404, 500), sites qui ne chargent pas, timeouts.",
  "steps": [
    {
      "kind": "ask",
      "question": "Erreur site : (1) Quel type d'erreur (page blanche sans message / 404 Page non trouvÃ©e / 500-503 Erreur serveur / charge Ã  l'infini) ? (2) URL exacte concernÃ©e ? (3) Tous utilisateurs ou un seul ? (4) Navigateur utilisÃ© ?",
      "step_id": "ASK_01_ERREUR_SITE_1_QUEL_2FB557",
      "field": "error_type"
    },
    {
      "kind": "solve",
      "title": "Diagnostic rapide initial",
      "response": "Avant toute chose, diagnostic rapide :\n\nâœ“ 1. TESTER AUTRES UTILISATEURS\n  â€¢ Vous (admin) pouvez accÃ©der ?\n  â€¢ Autres clients ont le problÃ¨me ?\n  â€¢ â†’ Si un seul client: problÃ¨me cÃ´tÃ© client\n  â€¢ â†’ Si tous: problÃ¨me cÃ´tÃ© TikTak\n\nâœ“ 2. TESTER NAVIGATION PRIVÃ‰E\n  â€¢ Ctrl+Shift+N (Chrome) ou Ctrl+Shift+P (Firefox)\n  â€¢ Site fonctionne en privÃ© ?\n  â€¢ â†’ Oui: problÃ¨me cache/cookies\n  â€¢ â†’ Non: problÃ¨me plus profond\n\nâœ“ 3. TESTER AUTRE NAVIGATEUR\n  â€¢ Chrome, Firefox, Safari, Edge\n  â€¢ Fonctionne ailleurs ?\n  â€¢ â†’ Oui: problÃ¨me navigateur spÃ©cifique\n  â€¢ â†’ Non: problÃ¨me gÃ©nÃ©ral\n\nâœ“ 4. TESTER AUTRE APPAREIL\n  â€¢ Mobile vs Desktop\n  â€¢ WiFi vs 4G\n  â€¢ Chez vous vs chez client\n\nLe problÃ¨me est-il global ou localisÃ© ?",
      "actions": [
        "test_other_users",
        "test_incognito_mode",
        "test_other_browser",
        "test_other_device"
      ],
      "success_indicator": "Isolation du problÃ¨me: global vs local, navigateur vs rÃ©seau",
      "time_estimate": "2-3 minutes",
      "step_id": "SOLVE_02_DIAGNOSTIC_RAPIDE__0C6B91"
    },
    {
      "kind": "solve",
      "title": "Page Blanche / Ã‰cran Vide (pas de message)",
      "response": "Si page complÃ¨tement blanche sans aucun message :\n\nâœ“ 1. VIDER CACHE NAVIGATEUR\n  Chrome/Edge:\n  â€¢ Ctrl+Shift+Delete\n  â€¢ Cocher 'Images et fichiers en cache'\n  â€¢ PÃ©riode: 'Tout'\n  â€¢ Effacer\n  \n  Firefox:\n  â€¢ Ctrl+Shift+Delete\n  â€¢ Cocher 'Cache'\n  â€¢ PÃ©riode: 'Tout'\n  â€¢ Effacer maintenant\n  \n  Safari:\n  â€¢ Cmd+Option+E (vider cache)\n  â€¢ Ou DÃ©veloppement â†’ Vider les caches\n\nâœ“ 2. RAFRAÃŽCHIR FORCE\n  â€¢ Ctrl+F5 (Windows)\n  â€¢ Cmd+Shift+R (Mac)\n  â€¢ Recharge sans utiliser cache\n\nâœ“ 3. DÃ‰SACTIVER EXTENSIONS\n  â€¢ AdBlock, VPN, bloqueurs pub\n  â€¢ Mode navigation privÃ©e (dÃ©sactive tout)\n  â€¢ Retester\n\nâœ“ 4. VÃ‰RIFIER JAVASCRIPT\n  â€¢ Chrome: ParamÃ¨tres â†’ ConfidentialitÃ© â†’ ParamÃ¨tres des sites â†’ JavaScript\n  â€¢ Doit Ãªtre 'AutorisÃ©'\n  â€¢ TikTak PRO nÃ©cessite JavaScript\n\nâœ“ 5. CONSOLE DÃ‰VELOPPEUR\n  â€¢ F12 â†’ Console\n  â€¢ Erreurs rouges ?\n  â€¢ Screenshot et escalader si erreur technique\n\nLa page s'affiche aprÃ¨s avoir vidÃ© le cache ?",
      "actions": [
        "clear_browser_cache",
        "force_refresh",
        "disable_extensions",
        "check_javascript_enabled",
        "check_console_errors"
      ],
      "success_indicator": "Site s'affiche normalement aprÃ¨s une des actions",
      "time_estimate": "5 minutes",
      "common_fixes": [
        "Vider cache (80% des cas)",
        "Ctrl+F5 rafraÃ®chir force",
        "DÃ©sactiver AdBlock/VPN",
        "Mode navigation privÃ©e",
        "Autre navigateur"
      ],
      "troubleshooting": {
        "Blanc mÃªme aprÃ¨s cache": "VÃ©rifier JavaScript activÃ© + console F12",
        "Fonctionne en privÃ©": "Extensions ou cache â†’ DÃ©sactiver extensions",
        "Blanc sur tous navigateurs": "ProblÃ¨me rÃ©seau ou DNS â†’ Tester 4G"
      },
      "step_id": "SOLVE_03_PAGE_BLANCHE_CRAN__6DEC74"
    },
    {
      "kind": "solve",
      "title": "Erreur 404 - Page Non TrouvÃ©e",
      "response": "Erreur 404 = La page n'existe pas ou URL incorrecte\n\nâœ“ CAUSES COURANTES :\n  â€¢ URL mal saisie ou incomplÃ¨te\n  â€¢ Page supprimÃ©e\n  â€¢ Produit supprimÃ© (si page produit)\n  â€¢ Lien cassÃ© dans le site\n  â€¢ Slug URL modifiÃ©\n\nâœ“ SOLUTIONS CLIENT :\n  1. VÃ©rifier l'URL (copie exacte ?)\n  2. Retourner Ã  l'accueil: votresite.tiktak.space\n  3. Chercher le produit via recherche\n  4. Utiliser menu navigation\n\nâœ“ SOLUTIONS ADMIN :\n  1. VÃ©rifier page existe:\n     â€¢ Produits â†’ VÃ©rifier le produit existe\n     â€¢ Pages â†’ VÃ©rifier la page existe\n  2. VÃ©rifier visibilitÃ©:\n     â€¢ Produit: 'Visible sur site' cochÃ© ?\n     â€¢ Page: 'PubliÃ©e' (pas 'Brouillon') ?\n  3. VÃ©rifier slug/URL:\n     â€¢ Pages â†’ Ã‰diter â†’ URL/Slug\n     â€¢ Doit correspondre Ã  l'URL demandÃ©e\n  4. CatÃ©gories:\n     â€¢ CatÃ©gories â†’ VÃ©rifier 'Active'\n     â€¢ Produit assignÃ© Ã  catÃ©gorie active ?\n\nâš ï¸ Si page existait avant:\nâ€¢ A-t-elle Ã©tÃ© supprimÃ©e par erreur ?\nâ€¢ URL modifiÃ©e rÃ©cemment ?\nâ€¢ Restaurer depuis corbeille si disponible\n\nL'URL est-elle correcte ? La page/produit existe-t-il ?",
      "actions": [
        "verify_url_correct",
        "check_page_exists",
        "check_product_visibility",
        "verify_slug_url",
        "check_category_active"
      ],
      "success_indicator": "Page accessible ou raison 404 identifiÃ©e (supprimÃ©e, masquÃ©e)",
      "common_errors": [
        "Produit masquÃ© â†’ Activer 'Visible sur site'",
        "Page en brouillon â†’ Publier la page",
        "CatÃ©gorie inactive â†’ Activer catÃ©gorie",
        "URL modifiÃ©e â†’ Utiliser nouveau slug"
      ],
      "step_id": "SOLVE_04_ERREUR_404_PAGE_NO_4C7FA0"
    },
    {
      "kind": "solve",
      "title": "Erreur 500 / 502 / 503 - Erreur Serveur",
      "response": "Erreurs 5xx = ProblÃ¨me cÃ´tÃ© serveur TikTak PRO\n\nâš ï¸ IMPORTANT: Ces erreurs nÃ©cessitent souvent escalade\n\nâŒ CE N'EST PAS UN PROBLÃˆME CLIENT\nâ€¢ 500 Internal Server Error: bug application\nâ€¢ 502 Bad Gateway: problÃ¨me proxy/serveur\nâ€¢ 503 Service Unavailable: maintenance ou surcharge\nâ€¢ 504 Gateway Timeout: serveur trop lent\n\nâœ“ QUE FAIRE (CLIENT) :\n  1. Noter l'heure exacte de l'erreur\n  2. Noter l'URL complÃ¨te\n  3. Prendre capture d'Ã©cran\n  4. Attendre 5-10 minutes\n  5. RÃ©essayer\n  6. Si persiste > 5 min â†’ Contacter support\n\nâœ“ QUE FAIRE (VOUS) :\n  1. VÃ©rifier si erreur gÃ©nÃ©rale:\n     â€¢ Vous aussi avez l'erreur ?\n     â€¢ Page d'accueil fonctionne ?\n     â€¢ Autres sections accessibles ?\n  2. Tester depuis autre connexion\n  3. Si gÃ©nÃ©ral et persiste > 5 min:\n     â†’ ESCALADE IMMÃ‰DIATE\n  4. Si localisÃ© Ã  une page:\n     â†’ Noter quelle page\n     â†’ Tester autres pages similaires\n     â†’ Escalader avec dÃ©tails\n\nðŸ“‹ INFORMATIONS Ã€ COLLECTER :\nâ€¢ URL exacte\nâ€¢ Code erreur exact (500/502/503/504)\nâ€¢ Heure prÃ©cise (HH:MM)\nâ€¢ Capture Ã©cran\nâ€¢ Action qui a provoquÃ© l'erreur\nâ€¢ FrÃ©quence (une fois / systÃ©matique)\n\nL'erreur est-elle gÃ©nÃ©rale ou sur une page spÃ©cifique ?",
      "actions": [
        "note_exact_time",
        "screenshot_error",
        "wait_retry",
        "test_other_pages",
        "escalate_if_persists"
      ],
      "success_indicator": "Erreur rÃ©solue aprÃ¨s attente, ou informations collectÃ©es pour escalade",
      "escalation_criteria": "Erreur 500/502/503/504 persiste > 5 minutes, ou affecte tous utilisateurs",
      "time_estimate": "5-10 minutes d'attente recommandÃ©e avant escalade",
      "step_id": "SOLVE_05_ERREUR_500_502_503_0B6076"
    },
    {
      "kind": "solve",
      "title": "Page Charge Ã  l'Infini (Loading...)",
      "response": "Si page affiche 'Chargement...' indÃ©finiment :\n\nâœ“ 1. VÃ‰RIFIER CONNEXION INTERNET\n  â€¢ Testez autre site (google.com)\n  â€¢ WiFi/4G active et stable ?\n  â€¢ DÃ©bit suffisant ?\n\nâœ“ 2. VIDER CACHE\n  â€¢ Ctrl+Shift+Delete â†’ Cache\n  â€¢ Ctrl+F5 rafraÃ®chir\n\nâœ“ 3. DÃ‰SACTIVER VPN/PROXY\n  â€¢ VPN peut ralentir ou bloquer\n  â€¢ Proxy d'entreprise peut filtrer\n  â€¢ DÃ©sactiver temporairement\n  â€¢ Retester\n\nâœ“ 4. DÃ‰SACTIVER ADBLOCK\n  â€¢ AdBlock peut bloquer scripts\n  â€¢ DÃ©sactiver pour tiktak.space\n  â€¢ Retester\n\nâœ“ 5. CLOUDFLARE CHALLENGE\n  â€¢ Message 'Checking your browser...' ?\n  â€¢ C'est normal (protection DDoS)\n  â€¢ Attendre 5-10 secondes\n  â€¢ Devrait passer automatiquement\n  â€¢ Si bloquÃ©: vÃ©rifier cookies activÃ©s\n\nâœ“ 6. TIMEOUT RÃ‰SEAU\n  â€¢ Si connexion lente (<2 Mbps)\n  â€¢ Page peut timeout\n  â€¢ Attendre ou rÃ©essayer plus tard\n  â€¢ Tester depuis 4G\n\nLa connexion internet est-elle stable ? VPN activÃ© ?",
      "actions": [
        "verify_internet_connection",
        "clear_cache_retry",
        "disable_vpn_proxy",
        "disable_adblock",
        "wait_cloudflare_challenge",
        "test_4g_connection"
      ],
      "success_indicator": "Page charge complÃ¨tement, ou cause identifiÃ©e (VPN, connexion lente)",
      "time_estimate": "5-10 secondes si Cloudflare, sinon problÃ¨me rÃ©seau",
      "common_fixes": [
        "Attendre Cloudflare challenge (5-10s)",
        "DÃ©sactiver VPN",
        "Vider cache + Ctrl+F5",
        "Tester 4G au lieu de WiFi"
      ],
      "step_id": "SOLVE_06_PAGE_CHARGE_L_INFI_732EB5"
    },
    {
      "kind": "solve",
      "title": "Console DÃ©veloppeur (diagnostic avancÃ©)",
      "response": "Pour utilisateurs avancÃ©s ou escalade :\n\nâœ“ OUVRIR CONSOLE DÃ‰VELOPPEUR :\n  â€¢ F12 (tous navigateurs)\n  â€¢ Ou clic droit â†’ Inspecter â†’ Console\n\nâœ“ QUE CHERCHER :\n  ðŸ”´ Erreurs rouges:\n  â€¢ 'Failed to load resource' â†’ Fichier manquant\n  â€¢ 'Uncaught TypeError' â†’ Bug JavaScript\n  â€¢ 'CORS error' â†’ ProblÃ¨me sÃ©curitÃ©\n  â€¢ 'net::ERR_CONNECTION_REFUSED' â†’ Serveur inaccessible\n  \n  ðŸŸ¡ Warnings jaunes:\n  â€¢ Moins critiques\n  â€¢ Peuvent indiquer problÃ¨mes\n  \n  â„¹ï¸ Info bleues:\n  â€¢ Normales, ignorer\n\nâœ“ ACTIONS :\n  1. Screenshot console complÃ¨te\n  2. Copier texte des erreurs rouges\n  3. Noter ressources en Ã©chec\n  4. Fournir lors escalade\n\nâš ï¸ Ne PAS modifier code dans console sauf si expert\n\nY a-t-il des erreurs rouges dans la console ?",
      "actions": [
        "open_developer_console",
        "screenshot_console_errors",
        "copy_error_messages",
        "provide_for_escalation"
      ],
      "success_indicator": "Erreurs identifiÃ©es et documentÃ©es pour escalade",
      "note": "Requis pour escalade de problÃ¨mes techniques complexes",
      "step_id": "SOLVE_07_CONSOLE_D_VELOPPEU_4594F6"
    },
    {
      "kind": "verify",
      "question": "AprÃ¨s ces Ã©tapes, le site fonctionne-t-il normalement ? Si non, fournissez : type erreur exact, URL complÃ¨te, navigateur/version, rÃ©sultat mode privÃ©, capture console F12.",
      "step_id": "VERIFY_08_APR_S_CES_TAPES_LE_50C91A"
    },
    {
      "kind": "escalate",
      "reason": "Site inaccessible aprÃ¨s toutes vÃ©rifications client (cache vidÃ©, autres navigateurs testÃ©s, navigation privÃ©e), ou erreur serveur 5xx persistante, ou erreurs JavaScript critiques en console",
      "required_info": [
        "Type erreur exact (page blanche / 404 / 500 / loading infini)",
        "URL complÃ¨te qui pose problÃ¨me",
        "Message d'erreur exact (copiÃ©-collÃ© ou capture)",
        "Navigateur + version (Chrome 120, Firefox 115, etc)",
        "RÃ©sultat test navigation privÃ©e (fonctionne oui/non)",
        "RÃ©sultat test autre navigateur (fonctionne oui/non)",
        "Heure exacte du problÃ¨me (HH:MM)",
        "FrÃ©quence (une fois / systÃ©matique / intermittent)",
        "Affecte tous utilisateurs ou un seul",
        "Capture d'Ã©cran erreur",
        "Capture console dÃ©veloppeur F12 (si applicable)",
        "Action qui provoque l'erreur (navigation, clic bouton, soumission form)"
      ],
      "step_id": "ESCALATE_09_ESCALATE_F1C100",
      "when": [
        "needs_human_review"
      ],
      "handoff_template": {
        "summary": "Site inaccessible aprÃ¨s toutes vÃ©rifications client (cache vidÃ©, autres navigateurs testÃ©s, navigation privÃ©e), ou erreur serveur 5xx persistante, ou erreurs JavaScript critiques en console",
        "repro_steps": [],
        "evidence": [
          "Type erreur exact (page blanche / 404 / 500 / loading infini)",
          "URL complÃ¨te qui pose problÃ¨me",
          "Message d'erreur exact (copiÃ©-collÃ© ou capture)",
          "Navigateur + version (Chrome 120, Firefox 115, etc)",
          "RÃ©sultat test navigation privÃ©e (fonctionne oui/non)",
          "RÃ©sultat test autre navigateur (fonctionne oui/non)",
          "Heure exacte du problÃ¨me (HH:MM)",
          "FrÃ©quence (une fois / systÃ©matique / intermittent)",
          "Affecte tous utilisateurs ou un seul",
          "Capture d'Ã©cran erreur",
          "Capture console dÃ©veloppeur F12 (si applicable)",
          "Action qui provoque l'erreur (navigation, clic bouton, soumission form)"
        ],
        "suspected_component": "general",
        "priority": "P2"
      }
    }
  ],
  "diagnostic_checklist": {
    "verifications_client": [
      "Vider cache navigateur (Ctrl+Shift+Delete)",
      "RafraÃ®chir force (Ctrl+F5)",
      "Tester navigation privÃ©e",
      "DÃ©sactiver extensions (AdBlock, VPN)",
      "Tester autre navigateur",
      "Tester autre appareil/connexion",
      "VÃ©rifier JavaScript activÃ©"
    ],
    "signes_probleme_tiktak": [
      "Erreur 500/502/503 (serveur)",
      "Tous navigateurs affectÃ©s",
      "Mode privÃ© aussi affectÃ©",
      "Plusieurs utilisateurs rapportent",
      "Erreur JavaScript en console",
      "Fonctionne chez vous mais pas chez client (DNS?)"
    ]
  },
  "common_errors": [
    {
      "symptom": "Page blanche tous navigateurs",
      "cause": "JavaScript dÃ©sactivÃ© ou erreur critique JS",
      "solution": "Activer JavaScript, vÃ©rifier console F12, escalader si erreur technique"
    },
    {
      "symptom": "404 sur page qui existait avant",
      "cause": "Page supprimÃ©e, URL modifiÃ©e, ou masquÃ©e",
      "solution": "VÃ©rifier back-office si page existe et est publiÃ©e/visible"
    },
    {
      "symptom": "500 Internal Server Error",
      "cause": "Bug application ou problÃ¨me serveur",
      "solution": "Attendre 5 min, rÃ©essayer, escalader si persiste"
    },
    {
      "symptom": "Loading infini avec VPN",
      "cause": "VPN bloque connexion ou Cloudflare challenge",
      "solution": "DÃ©sactiver VPN, attendre Cloudflare, rÃ©essayer"
    }
  ],
  "best_practices": [
    "Toujours vider cache AVANT d'escalader",
    "Tester en navigation privÃ©e pour isoler problÃ¨me",
    "Noter heure exacte pour erreurs serveur",
    "Capturer console F12 pour problÃ¨mes techniques",
    "Tester autre navigateur/appareil pour confirmer",
    "Pour 5xx: attendre 5-10 min avant escalade"
  ],
  "canonical_scope": "technical",
  "required_fields": [
    {
      "key": "error_type",
      "question": "Quel type d'erreur (blanc / 404 / 500 / loading) ?"
    },
    {
      "key": "url",
      "question": "Quelle URL exacte pose problÃ¨me ?"
    },
    {
      "key": "cache_cleared",
      "question": "Le cache a-t-il Ã©tÃ© vidÃ© (Ctrl+Shift+Delete) ?"
    },
    {
      "key": "incognito_tested",
      "question": "Mode navigation privÃ©e testÃ© ? RÃ©sultat ?"
    }
  ],
  "schema_version": "v2_deterministic_steps"
}